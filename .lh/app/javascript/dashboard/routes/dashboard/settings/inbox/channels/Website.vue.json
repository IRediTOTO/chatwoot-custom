{
    "sourceFile": "app/javascript/dashboard/routes/dashboard/settings/inbox/channels/Website.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1718744480073,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1718744480073,
            "name": "Commit-0",
            "content": "<template>\n  <div\n    class=\"border border-slate-25 dark:border-slate-800/60 bg-white dark:bg-slate-900 h-full p-6 w-full max-w-full md:w-3/4 md:max-w-[75%] flex-shrink-0 flex-grow-0\"\n  >\n    <page-header\n      :header-title=\"$t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.TITLE')\"\n      :header-content=\"$t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.DESC')\"\n    />\n    <woot-loading-state\n      v-if=\"uiFlags.isCreating\"\n      :message=\"$t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.LOADING_MESSAGE')\"\n    />\n    <form\n      v-if=\"!uiFlags.isCreating\"\n      class=\"mx-0 flex flex-wrap\"\n      @submit.prevent=\"createChannel\"\n    >\n      <div class=\"w-full\">\n        <label>\n          {{ $t('INBOX_MGMT.ADD.WEBSITE_NAME.LABEL') }}\n          <input\n            v-model.trim=\"inboxName\"\n            type=\"text\"\n            :placeholder=\"$t('INBOX_MGMT.ADD.WEBSITE_NAME.PLACEHOLDER')\"\n          />\n        </label>\n      </div>\n      <div class=\"w-full\">\n        <label>\n          {{ $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.LABEL') }}\n          <input\n            v-model.trim=\"channelWebsiteUrl\"\n            type=\"text\"\n            :placeholder=\"\n              $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.PLACEHOLDER')\n            \"\n          />\n        </label>\n      </div>\n\n      <div class=\"w-full\">\n        <label>\n          {{ $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.WIDGET_COLOR.LABEL') }}\n          <woot-color-picker v-model=\"channelWidgetColor\" />\n        </label>\n      </div>\n\n      <div v-if=\"isSuperAdmin\" class=\"w-full\">\n        <label>\n          {{ $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.LABEL') }}\n          <input\n            v-model.trim=\"channelWelcomeTitle\"\n            type=\"text\"\n            :placeholder=\"\n              $t(\n                'INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.PLACEHOLDER'\n              )\n            \"\n          />\n        </label>\n      </div>\n      <div class=\"w-full\">\n        <label>\n          {{\n            $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.LABEL')\n          }}\n          <input\n            v-model.trim=\"channelWelcomeTagline\"\n            type=\"text\"\n            :placeholder=\"\n              $t(\n                'INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.PLACEHOLDER'\n              )\n            \"\n          />\n        </label>\n      </div>\n      <label class=\"w-full\">\n        {{ $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.LABEL') }}\n        <select v-model=\"greetingEnabled\">\n          <option :value=\"true\">\n            {{\n              $t(\n                'INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.ENABLED'\n              )\n            }}\n          </option>\n          <option :value=\"false\">\n            {{\n              $t(\n                'INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.DISABLED'\n              )\n            }}\n          </option>\n        </select>\n        <p class=\"help-text\">\n          {{\n            $t(\n              'INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.HELP_TEXT'\n            )\n          }}\n        </p>\n      </label>\n      <greetings-editor\n        v-if=\"greetingEnabled\"\n        v-model.trim=\"greetingMessage\"\n        class=\"w-full\"\n        :label=\"\n          $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.LABEL')\n        \"\n        :placeholder=\"\n          $t(\n            'INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.PLACEHOLDER'\n          )\n        \"\n        :richtext=\"!textAreaChannels\"\n      />\n      <div class=\"flex flex-row justify-end gap-2 py-2 px-0 w-full\">\n        <div class=\"w-full\">\n          <woot-submit-button\n            :loading=\"uiFlags.isCreating\"\n            :disabled=\"!channelWebsiteUrl || !inboxName\"\n            :button-text=\"$t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.SUBMIT_BUTTON')\"\n          />\n        </div>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport router from '../../../../index';\nimport PageHeader from '../../SettingsSubPageHeader.vue';\nimport GreetingsEditor from 'shared/components/GreetingsEditor.vue';\nimport alertMixin from 'shared/mixins/alertMixin';\nimport adminMixin from 'dashboard/mixins/isAdmin';\n\nexport default {\n  components: {\n    PageHeader,\n    GreetingsEditor,\n  },\n  mixins: [alertMixin, adminMixin],\n  data() {\n    return {\n      inboxName: '',\n      channelWebsiteUrl: '',\n      channelWidgetColor: '#009CE0',\n      channelWelcomeTitle: '',\n      channelWelcomeTagline: '',\n      greetingEnabled: false,\n      greetingMessage: '',\n    };\n  },\n  computed: {\n    ...mapGetters({\n      uiFlags: 'inboxes/getUIFlags',\n    }),\n    textAreaChannels() {\n      if (\n        this.isATwilioChannel ||\n        this.isATwitterInbox ||\n        this.isAFacebookInbox\n      )\n        return true;\n      return false;\n    },\n  },\n  methods: {\n    async createChannel() {\n      try {\n        const website = await this.$store.dispatch(\n          'inboxes/createWebsiteChannel',\n          {\n            name: this.inboxName,\n            greeting_enabled: this.greetingEnabled,\n            greeting_message: this.greetingMessage,\n            channel: {\n              type: 'web_widget',\n              website_url: this.channelWebsiteUrl,\n              widget_color: this.channelWidgetColor,\n              welcome_title: this.channelWelcomeTitle,\n              welcome_tagline: this.channelWelcomeTagline,\n            },\n          }\n        );\n        router.replace({\n          name: 'settings_inboxes_add_agents',\n          params: {\n            page: 'new',\n            inbox_id: website.id,\n          },\n        });\n      } catch (error) {\n        this.showAlert(\n          error.message ||\n            this.$t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.API.ERROR_MESSAGE')\n        );\n      }\n    },\n  },\n};\n</script>\n"
        }
    ]
}