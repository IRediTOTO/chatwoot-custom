{
    "sourceFile": "app/javascript/dashboard/routes/dashboard/settings/inbox/Settings.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1718744480788,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1718744487215,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,9 +78,9 @@\n             $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.PLACEHOLDER')\n           \"\n         />\n         <woot-input\n-          v-if=\"isAWebWidgetInbox && isAdmin\"\n+          v-if=\"isAWebWidgetInbox && isSuperAdmin\"\n           v-model.trim=\"channelWelcomeTitle\"\n           class=\"w-3/4 pb-4\"\n           :label=\"\n             $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.LABEL')\n"
                }
            ],
            "date": 1718744480788,
            "name": "Commit-0",
            "content": "<template>\n  <div\n    class=\"flex-grow flex-shrink w-full min-w-0 pl-0 pr-0 overflow-auto bg-white settings dark:bg-slate-800\"\n  >\n    <setting-intro-banner\n      :header-image=\"inbox.avatarUrl\"\n      :header-title=\"inboxName\"\n    >\n      <woot-tabs\n        class=\"settings--tabs\"\n        :index=\"selectedTabIndex\"\n        :border=\"false\"\n        @change=\"onTabChange\"\n      >\n        <woot-tabs-item\n          v-for=\"tab in tabs\"\n          :key=\"tab.key\"\n          :name=\"tab.name\"\n          :show-badge=\"false\"\n        />\n      </woot-tabs>\n    </setting-intro-banner>\n\n    <microsoft-reauthorize v-if=\"microsoftUnauthorized\" :inbox=\"inbox\" />\n    <facebook-reauthorize v-if=\"facebookUnauthorized\" :inbox=\"inbox\" />\n\n    <div v-if=\"selectedTabKey === 'inbox_settings'\" class=\"mx-8\">\n      <settings-section\n        :title=\"$t('INBOX_MGMT.SETTINGS_POPUP.INBOX_UPDATE_TITLE')\"\n        :sub-title=\"$t('INBOX_MGMT.SETTINGS_POPUP.INBOX_UPDATE_SUB_TEXT')\"\n        :show-border=\"false\"\n      >\n        <woot-avatar-uploader\n          :label=\"$t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_AVATAR.LABEL')\"\n          :src=\"avatarUrl\"\n          class=\"pb-4\"\n          delete-avatar\n          @change=\"handleImageUpload\"\n          @onAvatarDelete=\"handleAvatarDelete\"\n        />\n        <woot-input\n          v-model.trim=\"selectedInboxName\"\n          class=\"w-3/4 pb-4\"\n          :class=\"{ error: $v.selectedInboxName.$error }\"\n          :label=\"inboxNameLabel\"\n          :placeholder=\"inboxNamePlaceHolder\"\n          :error=\"\n            $v.selectedInboxName.$error\n              ? $t('INBOX_MGMT.ADD.CHANNEL_NAME.ERROR')\n              : ''\n          \"\n          @blur=\"$v.selectedInboxName.$touch\"\n        />\n        <woot-input\n          v-if=\"isAPIInbox\"\n          v-model.trim=\"webhookUrl\"\n          class=\"w-3/4 pb-4\"\n          :class=\"{ error: $v.webhookUrl.$error }\"\n          :label=\"\n            $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.LABEL')\n          \"\n          :placeholder=\"\n            $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.PLACEHOLDER')\n          \"\n          :error=\"\n            $v.webhookUrl.$error\n              ? $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.ERROR')\n              : ''\n          \"\n          @blur=\"$v.webhookUrl.$touch\"\n        />\n        <woot-input\n          v-if=\"isAWebWidgetInbox\"\n          v-model.trim=\"channelWebsiteUrl\"\n          class=\"w-3/4 pb-4\"\n          :label=\"$t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.LABEL')\"\n          :placeholder=\"\n            $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.PLACEHOLDER')\n          \"\n        />\n        <woot-input\n          v-if=\"isAWebWidgetInbox && isAdmin\"\n          v-model.trim=\"channelWelcomeTitle\"\n          class=\"w-3/4 pb-4\"\n          :label=\"\n            $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.LABEL')\n          \"\n          :placeholder=\"\n            $t(\n              'INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.PLACEHOLDER'\n            )\n          \"\n        />\n\n        <woot-input\n          v-if=\"isAWebWidgetInbox\"\n          v-model.trim=\"channelWelcomeTagline\"\n          class=\"w-3/4 pb-4\"\n          :label=\"\n            $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.LABEL')\n          \"\n          :placeholder=\"\n            $t(\n              'INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.PLACEHOLDER'\n            )\n          \"\n        />\n\n        <label v-if=\"isAWebWidgetInbox\" class=\"w-3/4 pb-4\">\n          {{ $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.WIDGET_COLOR.LABEL') }}\n          <woot-color-picker v-model=\"inbox.widget_color\" />\n        </label>\n\n        <label v-if=\"isAWhatsAppChannel\" class=\"w-3/4 pb-4\">\n          {{ $t('INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.LABEL') }}\n          <input v-model=\"whatsAppAPIProviderName\" type=\"text\" disabled />\n        </label>\n\n        <label class=\"w-3/4 pb-4\">\n          {{\n            $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.LABEL')\n          }}\n          <select v-model=\"greetingEnabled\">\n            <option :value=\"true\">\n              {{\n                $t(\n                  'INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.ENABLED'\n                )\n              }}\n            </option>\n            <option :value=\"false\">\n              {{\n                $t(\n                  'INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.DISABLED'\n                )\n              }}\n            </option>\n          </select>\n          <p class=\"pb-1 text-sm not-italic text-slate-600 dark:text-slate-400\">\n            {{\n              $t(\n                'INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.HELP_TEXT'\n              )\n            }}\n          </p>\n        </label>\n        <div v-if=\"greetingEnabled\" class=\"pb-4\">\n          <greetings-editor\n            v-model.trim=\"greetingMessage\"\n            :label=\"\n              $t(\n                'INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.LABEL'\n              )\n            \"\n            :placeholder=\"\n              $t(\n                'INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.PLACEHOLDER'\n              )\n            \"\n            :richtext=\"!textAreaChannels\"\n          />\n        </div>\n        <label v-if=\"isAWebWidgetInbox\" class=\"w-3/4 pb-4\">\n          {{ $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.TITLE') }}\n          <select v-model=\"replyTime\">\n            <option key=\"in_a_few_minutes\" value=\"in_a_few_minutes\">\n              {{\n                $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_FEW_MINUTES')\n              }}\n            </option>\n            <option key=\"in_a_few_hours\" value=\"in_a_few_hours\">\n              {{\n                $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_FEW_HOURS')\n              }}\n            </option>\n            <option key=\"in_a_day\" value=\"in_a_day\">\n              {{ $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_DAY') }}\n            </option>\n          </select>\n\n          <p class=\"pb-1 text-sm not-italic text-slate-600 dark:text-slate-400\">\n            {{ $t('INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.HELP_TEXT') }}\n          </p>\n        </label>\n\n        <label v-if=\"isAWebWidgetInbox\" class=\"w-3/4 pb-4\">\n          {{ $t('INBOX_MGMT.SETTINGS_POPUP.ENABLE_EMAIL_COLLECT_BOX') }}\n          <select v-model=\"emailCollectEnabled\">\n            <option :value=\"true\">\n              {{ $t('INBOX_MGMT.EDIT.EMAIL_COLLECT_BOX.ENABLED') }}\n            </option>\n            <option :value=\"false\">\n              {{ $t('INBOX_MGMT.EDIT.EMAIL_COLLECT_BOX.DISABLED') }}\n            </option>\n          </select>\n          <p class=\"pb-1 text-sm not-italic text-slate-600 dark:text-slate-400\">\n            {{\n              $t('INBOX_MGMT.SETTINGS_POPUP.ENABLE_EMAIL_COLLECT_BOX_SUB_TEXT')\n            }}\n          </p>\n        </label>\n\n        <label class=\"w-3/4 pb-4\">\n          {{ $t('INBOX_MGMT.SETTINGS_POPUP.ENABLE_CSAT') }}\n          <select v-model=\"csatSurveyEnabled\">\n            <option :value=\"true\">\n              {{ $t('INBOX_MGMT.EDIT.ENABLE_CSAT.ENABLED') }}\n            </option>\n            <option :value=\"false\">\n              {{ $t('INBOX_MGMT.EDIT.ENABLE_CSAT.DISABLED') }}\n            </option>\n          </select>\n          <p class=\"pb-1 text-sm not-italic text-slate-600 dark:text-slate-400\">\n            {{ $t('INBOX_MGMT.SETTINGS_POPUP.ENABLE_CSAT_SUB_TEXT') }}\n          </p>\n        </label>\n\n        <label v-if=\"isAWebWidgetInbox\" class=\"w-3/4 pb-4\">\n          {{ $t('INBOX_MGMT.SETTINGS_POPUP.ALLOW_MESSAGES_AFTER_RESOLVED') }}\n          <select v-model=\"allowMessagesAfterResolved\">\n            <option :value=\"true\">\n              {{ $t('INBOX_MGMT.EDIT.ALLOW_MESSAGES_AFTER_RESOLVED.ENABLED') }}\n            </option>\n            <option :value=\"false\">\n              {{ $t('INBOX_MGMT.EDIT.ALLOW_MESSAGES_AFTER_RESOLVED.DISABLED') }}\n            </option>\n          </select>\n          <p class=\"pb-1 text-sm not-italic text-slate-600 dark:text-slate-400\">\n            {{\n              $t(\n                'INBOX_MGMT.SETTINGS_POPUP.ALLOW_MESSAGES_AFTER_RESOLVED_SUB_TEXT'\n              )\n            }}\n          </p>\n        </label>\n\n        <label v-if=\"isAWebWidgetInbox\" class=\"w-3/4 pb-4\">\n          {{ $t('INBOX_MGMT.SETTINGS_POPUP.ENABLE_CONTINUITY_VIA_EMAIL') }}\n          <select v-model=\"continuityViaEmail\">\n            <option :value=\"true\">\n              {{ $t('INBOX_MGMT.EDIT.ENABLE_CONTINUITY_VIA_EMAIL.ENABLED') }}\n            </option>\n            <option :value=\"false\">\n              {{ $t('INBOX_MGMT.EDIT.ENABLE_CONTINUITY_VIA_EMAIL.DISABLED') }}\n            </option>\n          </select>\n          <p class=\"pb-1 text-sm not-italic text-slate-600 dark:text-slate-400\">\n            {{\n              $t(\n                'INBOX_MGMT.SETTINGS_POPUP.ENABLE_CONTINUITY_VIA_EMAIL_SUB_TEXT'\n              )\n            }}\n          </p>\n        </label>\n        <div class=\"w-3/4 pb-4\">\n          <label>\n            {{ $t('INBOX_MGMT.HELP_CENTER.LABEL') }}\n          </label>\n          <select v-model=\"selectedPortalSlug\" class=\"filter__question\">\n            <option value=\"\">\n              {{ $t('INBOX_MGMT.HELP_CENTER.PLACEHOLDER') }}\n            </option>\n            <option v-for=\"p in portals\" :key=\"p.slug\" :value=\"p.slug\">\n              {{ p.name }}\n            </option>\n          </select>\n          <p class=\"pb-1 text-sm not-italic text-slate-600 dark:text-slate-400\">\n            {{ $t('INBOX_MGMT.HELP_CENTER.SUB_TEXT') }}\n          </p>\n        </div>\n        <label v-if=\"canLocktoSingleConversation\" class=\"w-3/4 pb-4\">\n          {{ $t('INBOX_MGMT.SETTINGS_POPUP.LOCK_TO_SINGLE_CONVERSATION') }}\n          <select v-model=\"locktoSingleConversation\">\n            <option :value=\"true\">\n              {{ $t('INBOX_MGMT.EDIT.LOCK_TO_SINGLE_CONVERSATION.ENABLED') }}\n            </option>\n            <option :value=\"false\">\n              {{ $t('INBOX_MGMT.EDIT.LOCK_TO_SINGLE_CONVERSATION.DISABLED') }}\n            </option>\n          </select>\n          <p class=\"pb-1 text-sm not-italic text-slate-600 dark:text-slate-400\">\n            {{\n              $t(\n                'INBOX_MGMT.SETTINGS_POPUP.LOCK_TO_SINGLE_CONVERSATION_SUB_TEXT'\n              )\n            }}\n          </p>\n        </label>\n\n        <label v-if=\"isAWebWidgetInbox\">\n          {{ $t('INBOX_MGMT.FEATURES.LABEL') }}\n        </label>\n        <div v-if=\"isAWebWidgetInbox\" class=\"flex gap-2 pt-2 pb-4\">\n          <input\n            v-model=\"selectedFeatureFlags\"\n            type=\"checkbox\"\n            value=\"attachments\"\n            @input=\"handleFeatureFlag\"\n          />\n          <label for=\"attachments\">\n            {{ $t('INBOX_MGMT.FEATURES.DISPLAY_FILE_PICKER') }}\n          </label>\n        </div>\n        <div v-if=\"isAWebWidgetInbox\" class=\"flex gap-2 pb-4\">\n          <input\n            v-model=\"selectedFeatureFlags\"\n            type=\"checkbox\"\n            value=\"emoji_picker\"\n            @input=\"handleFeatureFlag\"\n          />\n          <label for=\"emoji_picker\">\n            {{ $t('INBOX_MGMT.FEATURES.DISPLAY_EMOJI_PICKER') }}\n          </label>\n        </div>\n        <div v-if=\"isAWebWidgetInbox\" class=\"flex gap-2 pb-4\">\n          <input\n            v-model=\"selectedFeatureFlags\"\n            type=\"checkbox\"\n            value=\"end_conversation\"\n            @input=\"handleFeatureFlag\"\n          />\n          <label for=\"end_conversation\">\n            {{ $t('INBOX_MGMT.FEATURES.ALLOW_END_CONVERSATION') }}\n          </label>\n        </div>\n        <div v-if=\"isAWebWidgetInbox\" class=\"flex gap-2 pb-4\">\n          <input\n            v-model=\"selectedFeatureFlags\"\n            type=\"checkbox\"\n            value=\"use_inbox_avatar_for_bot\"\n            @input=\"handleFeatureFlag\"\n          />\n          <label for=\"emoji_picker\">\n            {{ $t('INBOX_MGMT.FEATURES.USE_INBOX_AVATAR_FOR_BOT') }}\n          </label>\n        </div>\n      </settings-section>\n      <settings-section\n        v-if=\"(isAWebWidgetInbox || isAnEmailChannel) && isAdmin\"\n        :title=\"$t('INBOX_MGMT.EDIT.SENDER_NAME_SECTION.TITLE')\"\n        :sub-title=\"$t('INBOX_MGMT.EDIT.SENDER_NAME_SECTION.SUB_TEXT')\"\n        :show-border=\"false\"\n      >\n        <div class=\"w-3/4 pb-4\">\n          <sender-name-example-preview\n            :sender-name-type=\"senderNameType\"\n            :business-name=\"businessName\"\n            @update=\"toggleSenderNameType\"\n          />\n          <div class=\"flex flex-col items-start gap-2 mt-2\">\n            <woot-button\n              variant=\"clear\"\n              color-scheme=\"primary\"\n              @click=\"onClickShowBusinessNameInput\"\n            >\n              {{\n                $t(\n                  'INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.BUTTON_TEXT'\n                )\n              }}\n            </woot-button>\n            <div v-if=\"showBusinessNameInput\" class=\"flex gap-2 w-[80%]\">\n              <input\n                ref=\"businessNameInput\"\n                v-model=\"businessName\"\n                :placeholder=\"\n                  $t(\n                    'INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.PLACEHOLDER'\n                  )\n                \"\n                class=\"mb-0\"\n                type=\"text\"\n              />\n              <woot-button color-scheme=\"primary\" @click=\"updateInbox\">\n                {{\n                  $t(\n                    'INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.SAVE_BUTTON_TEXT'\n                  )\n                }}\n              </woot-button>\n            </div>\n          </div>\n        </div>\n      </settings-section>\n      <settings-section :show-border=\"false\">\n        <woot-submit-button\n          v-if=\"isAPIInbox\"\n          type=\"submit\"\n          :disabled=\"$v.webhookUrl.$invalid\"\n          :button-text=\"$t('INBOX_MGMT.SETTINGS_POPUP.UPDATE')\"\n          :loading=\"uiFlags.isUpdating\"\n          @click=\"updateInbox\"\n        />\n        <woot-submit-button\n          v-else\n          type=\"submit\"\n          :disabled=\"$v.$invalid\"\n          :button-text=\"$t('INBOX_MGMT.SETTINGS_POPUP.UPDATE')\"\n          :loading=\"uiFlags.isUpdating\"\n          @click=\"updateInbox\"\n        />\n      </settings-section>\n    </div>\n\n    <div v-if=\"selectedTabKey === 'collaborators'\" class=\"mx-8\">\n      <collaborators-page :inbox=\"inbox\" />\n    </div>\n    <div v-if=\"selectedTabKey === 'configuration'\">\n      <configuration-page :inbox=\"inbox\" />\n    </div>\n    <div v-if=\"selectedTabKey === 'preChatForm'\">\n      <pre-chat-form-settings :inbox=\"inbox\" />\n    </div>\n    <div v-if=\"selectedTabKey === 'businesshours'\">\n      <weekly-availability :inbox=\"inbox\" />\n    </div>\n    <div v-if=\"selectedTabKey === 'widgetBuilder'\">\n      <widget-builder :inbox=\"inbox\" />\n    </div>\n    <div v-if=\"selectedTabKey === 'botConfiguration'\">\n      <bot-configuration :inbox=\"inbox\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport { shouldBeUrl } from 'shared/helpers/Validators';\nimport configMixin from 'shared/mixins/configMixin';\nimport alertMixin from 'shared/mixins/alertMixin';\nimport SettingIntroBanner from 'dashboard/components/widgets/SettingIntroBanner.vue';\nimport SettingsSection from '../../../../components/SettingsSection.vue';\nimport inboxMixin from 'shared/mixins/inboxMixin';\nimport FacebookReauthorize from './facebook/Reauthorize.vue';\nimport PreChatFormSettings from './PreChatForm/Settings.vue';\nimport WeeklyAvailability from './components/WeeklyAvailability.vue';\nimport GreetingsEditor from 'shared/components/GreetingsEditor.vue';\nimport ConfigurationPage from './settingsPage/ConfigurationPage.vue';\nimport CollaboratorsPage from './settingsPage/CollaboratorsPage.vue';\nimport MicrosoftReauthorize from './channels/microsoft/Reauthorize.vue';\nimport WidgetBuilder from './WidgetBuilder.vue';\nimport BotConfiguration from './components/BotConfiguration.vue';\nimport { FEATURE_FLAGS } from '../../../../featureFlags';\nimport SenderNameExamplePreview from './components/SenderNameExamplePreview.vue';\nimport adminMixin from 'dashboard/mixins/isAdmin';\n\nexport default {\n  components: {\n    BotConfiguration,\n    CollaboratorsPage,\n    ConfigurationPage,\n    FacebookReauthorize,\n    GreetingsEditor,\n    PreChatFormSettings,\n    SettingIntroBanner,\n    SettingsSection,\n    WeeklyAvailability,\n    WidgetBuilder,\n    SenderNameExamplePreview,\n    MicrosoftReauthorize,\n  },\n  mixins: [alertMixin, configMixin, inboxMixin, adminMixin],\n  data() {\n    return {\n      avatarFile: null,\n      avatarUrl: '',\n      greetingEnabled: true,\n      greetingMessage: '',\n      emailCollectEnabled: false,\n      csatSurveyEnabled: false,\n      senderNameType: 'friendly',\n      businessName: '',\n      locktoSingleConversation: false,\n      allowMessagesAfterResolved: true,\n      continuityViaEmail: true,\n      selectedInboxName: '',\n      channelWebsiteUrl: '',\n      webhookUrl: '',\n      channelWelcomeTitle: '',\n      channelWelcomeTagline: '',\n      selectedFeatureFlags: [],\n      replyTime: '',\n      selectedTabIndex: 0,\n      selectedPortalSlug: '',\n      showBusinessNameInput: false,\n    };\n  },\n  computed: {\n    ...mapGetters({\n      accountId: 'getCurrentAccountId',\n      isFeatureEnabledonAccount: 'accounts/isFeatureEnabledonAccount',\n      uiFlags: 'inboxes/getUIFlags',\n      portals: 'portals/allPortals',\n    }),\n    selectedTabKey() {\n      return this.tabs[this.selectedTabIndex]?.key;\n    },\n    whatsAppAPIProviderName() {\n      if (this.isAWhatsAppCloudChannel) {\n        return this.$t('INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.WHATSAPP_CLOUD');\n      }\n      if (this.is360DialogWhatsAppChannel) {\n        return this.$t('INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.360_DIALOG');\n      }\n      if (this.isATwilioWhatsAppChannel) {\n        return this.$t('INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.TWILIO');\n      }\n      return '';\n    },\n    tabs() {\n      let visibleToAllChannelTabs = [\n        {\n          key: 'inbox_settings',\n          name: this.$t('INBOX_MGMT.TABS.SETTINGS'),\n        },\n        {\n          key: 'collaborators',\n          name: this.$t('INBOX_MGMT.TABS.COLLABORATORS'),\n        },\n        {\n          key: 'businesshours',\n          name: this.$t('INBOX_MGMT.TABS.BUSINESS_HOURS'),\n        },\n      ];\n\n      if (this.isAWebWidgetInbox) {\n        visibleToAllChannelTabs = [\n          ...visibleToAllChannelTabs,\n          {\n            key: 'preChatForm',\n            name: this.$t('INBOX_MGMT.TABS.PRE_CHAT_FORM'),\n          },\n          {\n            key: 'widgetBuilder',\n            name: this.$t('INBOX_MGMT.TABS.WIDGET_BUILDER'),\n          },\n        ];\n      }\n\n      if (\n        this.isATwilioChannel ||\n        this.isALineChannel ||\n        this.isAPIInbox ||\n        (this.isAnEmailChannel && !this.inbox.provider) ||\n        this.isAMicrosoftInbox ||\n        this.isAGoogleInbox ||\n        this.isAWhatsAppChannel ||\n        this.isAWebWidgetInbox\n      ) {\n        visibleToAllChannelTabs = [\n          ...visibleToAllChannelTabs,\n          {\n            key: 'configuration',\n            name: this.$t('INBOX_MGMT.TABS.CONFIGURATION'),\n          },\n        ];\n      }\n\n      if (\n        this.isFeatureEnabledonAccount(\n          this.accountId,\n          FEATURE_FLAGS.AGENT_BOTS\n        ) &&\n        !(this.isAnEmailChannel || this.isATwitterInbox)\n      ) {\n        visibleToAllChannelTabs = [\n          ...visibleToAllChannelTabs,\n          {\n            key: 'botConfiguration',\n            name: this.$t('INBOX_MGMT.TABS.BOT_CONFIGURATION'),\n          },\n        ];\n      }\n      return visibleToAllChannelTabs;\n    },\n    currentInboxId() {\n      return this.$route.params.inboxId;\n    },\n    inbox() {\n      return this.$store.getters['inboxes/getInbox'](this.currentInboxId);\n    },\n\n    inboxName() {\n      if (this.isATwilioSMSChannel || this.isATwilioWhatsAppChannel) {\n        return `${this.inbox.name} (${\n          this.inbox.messaging_service_sid || this.inbox.phone_number\n        })`;\n      }\n      if (this.isAWhatsAppChannel) {\n        return `${this.inbox.name} (${this.inbox.phone_number})`;\n      }\n      if (this.isAnEmailChannel) {\n        return `${this.inbox.name} (${this.inbox.email})`;\n      }\n      return this.inbox.name;\n    },\n    canLocktoSingleConversation() {\n      return (\n        this.isASmsInbox || this.isAWhatsAppChannel || this.isAFacebookInbox\n      );\n    },\n    inboxNameLabel() {\n      if (this.isAWebWidgetInbox) {\n        return this.$t('INBOX_MGMT.ADD.WEBSITE_NAME.LABEL');\n      }\n      return this.$t('INBOX_MGMT.ADD.CHANNEL_NAME.LABEL');\n    },\n    inboxNamePlaceHolder() {\n      if (this.isAWebWidgetInbox) {\n        return this.$t('INBOX_MGMT.ADD.WEBSITE_NAME.PLACEHOLDER');\n      }\n      return this.$t('INBOX_MGMT.ADD.CHANNEL_NAME.PLACEHOLDER');\n    },\n    textAreaChannels() {\n      if (\n        this.isATwilioChannel ||\n        this.isATwitterInbox ||\n        this.isAFacebookInbox\n      )\n        return true;\n      return false;\n    },\n    microsoftUnauthorized() {\n      return this.isAMicrosoftInbox && this.inbox.reauthorization_required;\n    },\n    facebookUnauthorized() {\n      return this.isAFacebookInbox && this.inbox.reauthorization_required;\n    },\n  },\n  watch: {\n    $route(to) {\n      if (to.name === 'settings_inbox_show') {\n        this.fetchInboxSettings();\n      }\n    },\n  },\n  mounted() {\n    this.fetchInboxSettings();\n    this.fetchPortals();\n  },\n  methods: {\n    fetchPortals() {\n      this.$store.dispatch('portals/index');\n    },\n    handleFeatureFlag(e) {\n      this.selectedFeatureFlags = this.toggleInput(\n        this.selectedFeatureFlags,\n        e.target.value\n      );\n    },\n    toggleInput(selected, current) {\n      if (selected.includes(current)) {\n        const newSelectedFlags = selected.filter(flag => flag !== current);\n        return newSelectedFlags;\n      }\n      return [...selected, current];\n    },\n    onTabChange(selectedTabIndex) {\n      this.selectedTabIndex = selectedTabIndex;\n    },\n    fetchInboxSettings() {\n      this.selectedTabIndex = 0;\n      this.selectedAgents = [];\n      this.$store.dispatch('agents/get');\n      this.$store.dispatch('teams/get');\n      this.$store.dispatch('labels/get');\n      this.$store.dispatch('inboxes/get').then(() => {\n        this.avatarUrl = this.inbox.avatar_url;\n        this.selectedInboxName = this.inbox.name;\n        this.webhookUrl = this.inbox.webhook_url;\n        this.greetingEnabled = this.inbox.greeting_enabled || false;\n        this.greetingMessage = this.inbox.greeting_message || '';\n        this.emailCollectEnabled = this.inbox.enable_email_collect;\n        this.csatSurveyEnabled = this.inbox.csat_survey_enabled;\n        this.senderNameType = this.inbox.sender_name_type;\n        this.businessName = this.inbox.business_name;\n        this.allowMessagesAfterResolved =\n          this.inbox.allow_messages_after_resolved;\n        this.continuityViaEmail = this.inbox.continuity_via_email;\n        this.channelWebsiteUrl = this.inbox.website_url;\n        this.channelWelcomeTitle = this.inbox.welcome_title;\n        this.channelWelcomeTagline = this.inbox.welcome_tagline;\n        this.selectedFeatureFlags = this.inbox.selected_feature_flags || [];\n        this.replyTime = this.inbox.reply_time;\n        this.locktoSingleConversation = this.inbox.lock_to_single_conversation;\n        this.selectedPortalSlug = this.inbox.help_center\n          ? this.inbox.help_center.slug\n          : '';\n      });\n    },\n    async updateInbox() {\n      try {\n        const payload = {\n          id: this.currentInboxId,\n          name: this.selectedInboxName,\n          enable_email_collect: this.emailCollectEnabled,\n          csat_survey_enabled: this.csatSurveyEnabled,\n          allow_messages_after_resolved: this.allowMessagesAfterResolved,\n          greeting_enabled: this.greetingEnabled,\n          greeting_message: this.greetingMessage || '',\n          portal_id: this.selectedPortalSlug\n            ? this.portals.find(\n                portal => portal.slug === this.selectedPortalSlug\n              ).id\n            : null,\n          lock_to_single_conversation: this.locktoSingleConversation,\n          sender_name_type: this.senderNameType,\n          business_name: this.businessName || null,\n          channel: {\n            widget_color: this.inbox.widget_color,\n            website_url: this.channelWebsiteUrl,\n            webhook_url: this.webhookUrl,\n            welcome_title: this.channelWelcomeTitle || '',\n            welcome_tagline: this.channelWelcomeTagline || '',\n            selectedFeatureFlags: this.selectedFeatureFlags,\n            reply_time: this.replyTime || 'in_a_few_minutes',\n            continuity_via_email: this.continuityViaEmail,\n          },\n        };\n        if (this.avatarFile) {\n          payload.avatar = this.avatarFile;\n        }\n        await this.$store.dispatch('inboxes/updateInbox', payload);\n        this.showAlert(this.$t('INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE'));\n      } catch (error) {\n        this.showAlert(\n          error.message || this.$t('INBOX_MGMT.EDIT.API.ERROR_MESSAGE')\n        );\n      }\n    },\n    handleImageUpload({ file, url }) {\n      this.avatarFile = file;\n      this.avatarUrl = url;\n    },\n    async handleAvatarDelete() {\n      try {\n        await this.$store.dispatch(\n          'inboxes/deleteInboxAvatar',\n          this.currentInboxId\n        );\n        this.avatarFile = null;\n        this.avatarUrl = '';\n        this.showAlert(this.$t('INBOX_MGMT.DELETE.API.AVATAR_SUCCESS_MESSAGE'));\n      } catch (error) {\n        this.showAlert(\n          error.message\n            ? error.message\n            : this.$t('INBOX_MGMT.DELETE.API.AVATAR_ERROR_MESSAGE')\n        );\n      }\n    },\n    toggleSenderNameType(key) {\n      this.senderNameType = key;\n    },\n    onClickShowBusinessNameInput() {\n      this.showBusinessNameInput = !this.showBusinessNameInput;\n      if (this.showBusinessNameInput) {\n        this.$nextTick(() => {\n          this.$refs.businessNameInput.focus();\n        });\n      }\n    },\n  },\n  validations: {\n    webhookUrl: {\n      shouldBeUrl,\n    },\n    selectedInboxName: {},\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.settings--tabs {\n  ::v-deep .tabs {\n    @apply p-0;\n  }\n}\n</style>\n"
        }
    ]
}